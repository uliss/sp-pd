#N canvas 301 106 390 513 10;
#X obj 22 23 inlet~;
#X obj 21 307 outlet~;
#N canvas 43 210 310 415 write-settings 0;
#X msg 165 345 arrayviewlistnew;
#X obj 165 374 s \$0-ampsettings;
#N canvas 1 73 450 300 (subpatch) 0;
#X array \$0-ampsettings 13 float 2;
#X coords 0 4 13 0 200 100 1 0 0;
#X restore 69 225 graph;
#X obj 56 23 inlet;
#X obj 56 49 unpack;
#X obj 70 178 tabwrite \$0-ampsettings;
#X obj 70 148 max 0;
#X obj 31 375 outlet;
#X text 80 375 done;
#X obj 89 95 + 1;
#X obj 31 94 t b f f;
#N canvas 358 356 357 340 copy 0;
#X obj 35 13 inlet;
#X obj 35 240 tabread \$0-ampsettings;
#X obj 35 269 tabwrite \$0-ampsettings;
#X obj 88 13 inlet;
#X obj 35 62 f;
#X obj 35 90 sel 1 10;
#X obj 35 210 unpack;
#X msg 35 184 1 0;
#X obj 91 173 tabread \$0-ampsettings;
#X obj 91 202 tabwrite \$0-ampsettings;
#X obj 91 143 unpack;
#X text 146 103 copy from index 10 to 11 and 12;
#X text 182 238 copy from index 1 to 0;
#X text 33 300 copy values so [tabread4] can interpolate later;
#X msg 91 107 10 11 \, 10 12;
#X obj 35 39 bang;
#X connect 0 0 15 0;
#X connect 1 0 2 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 5 1 14 0;
#X connect 6 0 1 0;
#X connect 6 1 2 1;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 10 0 8 0;
#X connect 10 1 9 1;
#X connect 14 0 10 0;
#X connect 15 0 4 0;
#X restore 50 121 pd copy;
#X text 101 120 copy if index 1 or 10;
#X text 114 94 shift index number;
#X text 97 23 list: RMS value + slider index;
#N canvas 366 346 315 213 initialize 0;
#X obj 22 47 loadbang;
#X msg 49 115 const 1;
#X obj 49 142 s \$0-ampsettings;
#X obj 22 172 outlet;
#X obj 22 89 t b b;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 4 0 3 0;
#X connect 4 1 1 0;
#X restore 66 345 pd initialize;
#X connect 0 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 4 1 9 0;
#X connect 6 0 5 0;
#X connect 9 0 5 1;
#X connect 9 0 11 1;
#X connect 10 0 7 0;
#X connect 10 1 11 0;
#X connect 10 2 6 0;
#X connect 15 0 7 0;
#X restore 85 50 pd write-settings;
#N canvas 25 329 662 394 stretch 0;
#X obj 17 178 tabread4 \$0-ampsettings;
#X obj 17 205 tabwrite \$0-stretched-settings;
#X obj 228 97 t f f;
#X obj 228 125 / 2;
#X obj 228 178 tabread4 \$0-stretched-settings;
#X obj 228 205 tabwrite \$0-stretched-settings2;
#X obj 433 100 t f f;
#X obj 433 74 for++ 0 1024;
#X obj 433 180 tabread4 \$0-stretched-settings2;
#X obj 433 206 tabwrite \$0-stretched-settings3;
#X obj 433 127 / 25.6;
#X obj 433 153 + 2;
#N canvas 1 73 450 300 (subpatch) 0;
#X array \$0-stretched-settings 23 float 2;
#X coords 0 4 23 0 200 100 1 0 0;
#X restore 17 255 graph;
#N canvas 1 73 450 300 (subpatch) 0;
#X array \$0-stretched-settings2 43 float 2;
#X coords 0 4 43 0 200 100 1 0 0;
#X restore 227 255 graph;
#X obj 17 78 t f f;
#X obj 17 138 / 2;
#N canvas 1 73 450 300 (subpatch) 0;
#X array \$0-stretched-settings3 1024 float 2;
#X coords 0 4 1024 0 200 100 1 0 0;
#X restore 437 255 graph;
#X obj 228 57 for++ 0 43;
#X obj 17 14 inlet;
#X text 305 11 Intermediate tables \$0-stretched-settings and \$0-stretched-settings2
each have 3 points extra for cubic interpolation.;
#X obj 502 365 outlet;
#X obj 17 40 for++ 0 23;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 2 1 5 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 10 0;
#X connect 6 1 9 1;
#X connect 7 0 6 0;
#X connect 7 1 20 0;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 11 0 8 0;
#X connect 14 0 15 0;
#X connect 14 1 1 1;
#X connect 15 0 0 0;
#X connect 17 0 2 0;
#X connect 17 1 7 0;
#X connect 18 0 21 0;
#X connect 21 0 14 0;
#X connect 21 1 17 0;
#X restore 85 109 pd stretch;
#N canvas 118 273 440 393 spectrum 0;
#X obj 24 38 for++ 0 1023;
#X obj 71 144 log;
#X msg 71 118 2;
#X obj 24 76 t f f;
#X obj 24 132 log;
#X obj 24 161 /;
#X obj 71 93 loadbang;
#X msg 228 147 arrayviewlistnew;
#X obj 24 188 * 102.372;
#N canvas 221 459 316 249 scaling-factor 0;
#X obj 157 140 log;
#X msg 157 114 2;
#X obj 77 130 log;
#X obj 77 157 /;
#X obj 35 174 /;
#X msg 35 131 1023;
#X obj 58 16 inlet;
#X obj 157 87 loadbang;
#X msg 77 82 1023;
#X obj 58 51 t b b f;
#X obj 35 202 outlet;
#X obj 77 105 -;
#X connect 0 0 3 1;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 1;
#X connect 4 0 10 0;
#X connect 5 0 4 0;
#X connect 6 0 9 0;
#X connect 7 0 1 0;
#X connect 8 0 11 0;
#X connect 9 0 5 0;
#X connect 9 1 8 0;
#X connect 9 2 11 1;
#X connect 11 0 2 0;
#X restore 228 83 pd scaling-factor;
#X msg 262 25 4;
#X floatatom 228 117 8 0 0 0 - - -;
#X text 91 187 scaling factor;
#X obj 24 102 - 4;
#X msg 228 25 3;
#X floatatom 228 58 5 0 0 0 - - -;
#X text 263 57 1st center bin;
#X obj 226 228 cnv 15 200 100 empty empty empty 20 12 0 14 -204786
-66577 0;
#N canvas 3 57 450 300 (subpatch) 0;
#X array \$0-fourierfilter 1024 float 0;
#X coords 0 4 1023 0 200 100 1 0 0;
#X restore 226 228 graph;
#X text 19 340 Spectrum: this subpatch warps the frequency scale from
exponential to linear.;
#X obj 24 270 tabwrite \$0-fourierfilter;
#X obj 228 178 s \$0-fourierfilter;
#X obj 24 11 inlet;
#X obj 24 216 tabread \$0-stretched-settings3;
#X obj 93 314 outlet;
#X obj 24 244 max 1e-05;
#X text 140 314 done;
#X connect 0 0 3 0;
#X connect 0 1 24 0;
#X connect 1 0 5 1;
#X connect 2 0 1 0;
#X connect 3 0 13 0;
#X connect 3 1 20 1;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 2 0;
#X connect 7 0 21 0;
#X connect 8 0 23 0;
#X connect 9 0 11 0;
#X connect 10 0 15 0;
#X connect 13 0 4 0;
#X connect 14 0 15 0;
#X connect 15 0 9 0;
#X connect 22 0 0 0;
#X connect 23 0 25 0;
#X connect 25 0 20 0;
#X restore 85 163 pd spectrum;
#N canvas 322 301 653 313 compute-minimum-phase-IR 0;
#X obj 39 17 inlet;
#X obj 39 261 outlet;
#X text 84 261 done;
#N canvas 88 187 296 259 z-to-s-plane 0;
#X obj 28 26 inlet;
#X obj 28 161 log;
#X obj 158 192 outlet;
#X text 203 192 done;
#X obj 28 192 tabwrite \$0-s-plane;
#X obj 28 94 t f f;
#X text 85 25 compute natural logarithms;
#X obj 28 123 tabread \$0-convolved-spectrum;
#X obj 28 68 for++ 0 1024;
#X connect 0 0 8 0;
#X connect 1 0 4 0;
#X connect 5 0 7 0;
#X connect 5 1 4 1;
#X connect 7 0 1 0;
#X connect 8 0 5 0;
#X connect 8 1 2 0;
#X restore 39 81 pd z-to-s-plane;
#N canvas 19 417 313 246 s-plane-to-cepstrum 0;
#X obj 14 17 inlet;
#X obj 49 212 tabwrite~ \$0-cepstrum-real;
#X obj 14 40 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 49 147 rifft~;
#X obj 49 179 /~ 2048;
#X obj 219 212 outlet;
#X text 269 210 done;
#X obj 49 117 tabplay~ \$0-s-plane;
#X obj 73 55 switch~ 2048;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 0 7 0;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 7 0 3 0;
#X connect 7 1 5 0;
#X restore 39 110 pd s-plane-to-cepstrum;
#N canvas 22 138 454 334 s-to-z-plane 0;
#X obj 129 10 inlet;
#X obj 21 270 tabwrite \$0-minphase-real;
#X obj 129 95 t f f f;
#X obj 36 214 cos;
#X obj 21 239 *;
#X obj 129 43 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 253 238 *;
#X obj 253 270 tabwrite \$0-minphase-im;
#X obj 268 213 sin;
#X obj 198 302 outlet;
#X text 241 302 done;
#X obj 268 158 tabread \$0-s-plane-im;
#X obj 21 153 tabread \$0-convolved-spectrum;
#X obj 129 70 for++ 0 1024;
#X connect 0 0 5 0;
#X connect 2 0 12 0;
#X connect 2 1 11 0;
#X connect 2 2 1 1;
#X connect 2 2 7 1;
#X connect 3 0 4 1;
#X connect 4 0 1 0;
#X connect 5 0 13 0;
#X connect 6 0 7 0;
#X connect 8 0 6 1;
#X connect 11 0 3 0;
#X connect 11 0 8 0;
#X connect 12 0 4 0;
#X connect 12 0 6 0;
#X connect 13 0 2 0;
#X connect 13 1 9 0;
#X restore 39 195 pd s-to-z-plane;
#N canvas 353 288 664 441 convolve-spectrum 0;
#X obj 35 19 inlet;
#X msg 244 147 0;
#X obj 259 235 + 1;
#X obj 244 175 t f f f;
#X obj 244 288 +;
#X obj 444 175 t f f f;
#X obj 444 286 +;
#X msg 444 147 1024;
#X obj 52 136 - 1;
#X obj 67 190 + 1;
#X obj 52 238 +;
#X obj 35 309 +;
#X obj 52 260 * 0.5;
#X obj 35 335 * 0.5;
#X obj 104 393 outlet;
#X obj 35 104 t f f f f;
#X obj 35 365 tabwrite \$0-convolved-spectrum;
#X obj 35 46 t b b;
#X obj 244 315 * 0.5;
#X obj 244 342 tabwrite \$0-convolved-spectrum;
#X obj 444 341 tabwrite \$0-convolved-spectrum;
#X obj 444 312 * 0.5;
#X text 149 392 done;
#X text 190 27 convolve spectrum with lo pass filter (Fourier transform
of Hann window);
#X obj 459 235 - 1;
#X obj 52 161 tabread \$0-fourierfilter;
#X obj 67 213 tabread \$0-fourierfilter;
#X obj 244 199 tabread \$0-fourierfilter;
#X obj 35 284 tabread \$0-fourierfilter;
#X obj 259 259 tabread \$0-fourierfilter;
#X obj 444 200 tabread \$0-fourierfilter;
#X obj 459 259 tabread \$0-fourierfilter;
#X obj 35 77 for++ 1 1023;
#X connect 0 0 17 0;
#X connect 1 0 3 0;
#X connect 2 0 29 0;
#X connect 3 0 27 0;
#X connect 3 1 2 0;
#X connect 3 2 19 1;
#X connect 4 0 18 0;
#X connect 5 0 30 0;
#X connect 5 1 24 0;
#X connect 5 2 20 1;
#X connect 6 0 21 0;
#X connect 7 0 5 0;
#X connect 8 0 25 0;
#X connect 9 0 26 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 12 0 11 1;
#X connect 13 0 16 0;
#X connect 15 0 28 0;
#X connect 15 1 8 0;
#X connect 15 2 9 0;
#X connect 15 3 16 1;
#X connect 17 0 32 0;
#X connect 17 1 1 0;
#X connect 17 1 7 0;
#X connect 18 0 19 0;
#X connect 21 0 20 0;
#X connect 24 0 31 0;
#X connect 25 0 10 0;
#X connect 26 0 10 1;
#X connect 27 0 4 0;
#X connect 28 0 11 0;
#X connect 29 0 4 1;
#X connect 30 0 6 0;
#X connect 31 0 6 1;
#X connect 32 0 15 0;
#X connect 32 1 14 0;
#X restore 39 53 pd convolve-spectrum;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-convolved-spectrum 1025 float 0;
#X coords 0 4 1024 0 200 100 1 0 0;
#X restore 215 178 graph;
#X obj 217 138 s \$0-convolved-spectrum;
#X msg 217 111 arrayviewlistnew;
#N canvas 37 222 322 266 cepstrum-to-s-plane 0;
#X obj 24 41 inlet;
#X obj 67 138 tabplay~ \$0-cepstrum-real;
#X obj 46 166 fft~;
#X obj 24 70 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 151 91 block~ 2048;
#X text 258 225 done;
#X obj 214 225 outlet;
#X text 73 41 Rotation by i.;
#X obj 46 225 tabwrite~ \$0-s-plane-im;
#X connect 0 0 3 0;
#X connect 1 0 2 1;
#X connect 1 1 6 0;
#X connect 2 0 8 0;
#X connect 3 0 1 0;
#X connect 3 0 8 0;
#X restore 39 166 pd cepstrum-to-s-plane;
#N canvas 482 304 272 251 z-plane-to-IR 0;
#X obj 12 33 inlet;
#X obj 12 217 tabwrite~ \$0-IR-minphase;
#X obj 29 99 tabplay~ \$0-minphase-real;
#X obj 62 124 tabplay~ \$0-minphase-im;
#X obj 29 151 rifft~;
#X obj 176 217 outlet;
#X text 222 218 done;
#X obj 29 182 /~ 2048;
#X obj 69 50 switch~ 2048;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 0 0 1 0;
#X connect 0 0 8 0;
#X connect 2 0 4 0;
#X connect 2 1 5 0;
#X connect 3 0 4 1;
#X connect 4 0 7 0;
#X connect 7 0 1 0;
#X restore 39 227 pd z-plane-to-IR;
#N canvas 305 73 716 391 window&signum 0;
#X obj 33 42 inlet;
#X obj 33 260 tabwrite \$0-cepstrum-real;
#X obj 33 126 tabread \$0-cepstrum-real;
#X obj 206 260 outlet;
#X text 253 262 done;
#X obj 33 97 t f f f;
#X obj 33 228 *;
#X obj 334 201 cos;
#X obj 334 121 t f f;
#X obj 334 37 loadbang;
#X obj 334 146 / 2048;
#X obj 345 61 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-window 2048 float 2;
#X coords 0 1 2047 -1 200 100 1;
#X restore 491 173 graph;
#X obj 334 256 tabwrite \$0-window;
#X obj 48 203 tabread \$0-window;
#X obj 334 226 * -1;
#X obj 334 177 * 3.14159;
#X text 32 306 windowing and multiplication with U[n] * 2 - 1;
#X text 29 340 U[n] is unit step function;
#X obj 33 70 for++ 0 2047;
#X obj 334 92 for++ 0 2047;
#X connect 0 0 19 0;
#X connect 2 0 6 0;
#X connect 5 0 2 0;
#X connect 5 1 14 0;
#X connect 5 2 1 1;
#X connect 6 0 1 0;
#X connect 7 0 15 0;
#X connect 8 0 10 0;
#X connect 8 1 13 1;
#X connect 9 0 20 0;
#X connect 10 0 16 0;
#X connect 11 0 20 0;
#X connect 14 0 6 1;
#X connect 15 0 13 0;
#X connect 16 0 7 0;
#X connect 19 0 5 0;
#X connect 19 1 3 0;
#X connect 20 0 8 0;
#X restore 39 138 pd window&signum;
#X obj 433 138 hsl 195 140 0 127 0 0 empty empty empty -2 -8 0 10 -204786
-204786 -1 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-minphase 2048 float 0;
#X coords 0 0.5 2047 -0.5 200 140 1;
#X restore 430 138 graph;
#N canvas 131 80 682 593 intermediate-arrays 0;
#N canvas 0 22 664 449 (subpatch) 0;
#X array \$0-s-plane-im 1025 float 0;
#X coords 0 3.14159 1024 -3.14159 200 140 1;
#X restore 227 285 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-minphase-real 1025 float 0;
#X coords 0 1 1024 -1 200 140 1;
#X restore 457 127 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-minphase-im 1025 float 0;
#X coords 0 1 1024 -1 200 140 1;
#X restore 457 285 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-s-plane 1025 float 0;
#X coords 0 0 1024 -13 200 140 1;
#X restore 19 85 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-cepstrum-real 2048 float 2;
#X coords 0 1 2047 -1 200 140 1;
#X restore 12 281 graph;
#X msg 327 196 arrayviewlistnew;
#X obj 327 227 s \$0-s-plane-im;
#X msg 60 445 arrayviewlistnew;
#X obj 60 475 s \$0-cepstrum-real;
#X msg 106 22 arrayviewlistnew;
#X obj 106 52 s \$0-s-plane;
#X connect 5 0 6 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X restore 216 55 pd intermediate-arrays;
#X connect 0 0 6 0;
#X connect 3 0 4 0;
#X connect 4 0 12 0;
#X connect 5 0 11 0;
#X connect 6 0 3 0;
#X connect 9 0 8 0;
#X connect 10 0 5 0;
#X connect 11 0 1 0;
#X connect 12 0 10 0;
#X restore 85 222 pd compute-minimum-phase-IR;
#X obj 85 248 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -260097
-1;
#X obj 85 24 inlet;
#X text 107 247 set new IR;
#X obj 85 193 delay 10;
#N canvas 40 320 388 294 partconv 0;
#X obj 27 17 inlet~;
#X obj 102 16 inlet;
#N canvas 341 177 495 501 partconv-A 0;
#X obj 278 325 hsl 195 140 0 127 0 0 empty empty empty -2 -8 0 10 -204786
-204786 -1 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-minphase-A 2048 float 0;
#X coords 0 0.5 2047 -0.5 200 140 1 0 0;
#X restore 275 325 graph;
#X obj 29 363 bsaylor/partconv~ \$0-IR-minphase-A 64;
#X obj 28 24 inlet~;
#X obj 79 24 inlet;
#X obj 98 282 f \$0;
#X msg 98 307 set \$1-IR-minphase-A;
#X obj 79 54 sel 1 0;
#X obj 44 394 line~;
#X obj 29 420 *~;
#X obj 28 448 outlet~;
#N canvas 233 458 311 250 arraycopy 0;
#X obj 35 34 inlet;
#X obj 35 79 for++ 0 2047;
#X obj 35 138 tabread \$0-IR-minphase;
#X obj 35 173 tabwrite \$0-IR-minphase-A;
#X obj 35 110 t f f;
#X obj 210 173 outlet;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 5 0;
#X connect 2 0 3 0;
#X connect 4 0 2 0;
#X connect 4 1 3 1;
#X restore 79 231 pd arraycopy;
#N canvas 379 306 310 248 crossovertime 0;
#X obj 24 196 outlet;
#X obj 24 87 samplerate~;
#X obj 24 60 loadbang;
#X obj 24 34 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 74 181 5 0 0 0 - - -;
#X obj 24 114 t b f;
#X obj 24 164 /;
#X msg 24 138 2.048e+06;
#X connect 1 0 5 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 5 0 7 0;
#X connect 5 1 6 1;
#X connect 6 0 4 0;
#X connect 6 0 0 0;
#X connect 7 0 6 0;
#X restore 303 95 pd crossovertime;
#X obj 79 333 pack 1 f;
#X msg 98 169 const 0;
#X obj 98 195 s \$0-IR-minphase-A;
#X obj 125 112 pack 0 f;
#X obj 98 84 t b b;
#X obj 98 139 delay;
#X text 182 112 fade out;
#X text 135 330 fade in;
#X text 129 256 activate;
#X text 139 83 deactivate;
#X obj 79 258 t b b b;
#X msg 196 412 1;
#N canvas 492 468 344 211 powersave 0;
#X obj 20 21 inlet~;
#X obj 20 45 env~;
#X obj 20 68 != 0;
#X obj 20 93 change;
#X obj 20 119 sel 0;
#X obj 20 170 outlet;
#X msg 20 145 0;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 6 0 5 0;
#X restore 111 412 pd powersave;
#X obj 111 446 switch~;
#X connect 2 0 9 0;
#X connect 3 0 2 0;
#X connect 4 0 7 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 7 0 11 0;
#X connect 7 1 17 0;
#X connect 8 0 9 1;
#X connect 8 0 25 0;
#X connect 9 0 10 0;
#X connect 11 0 23 0;
#X connect 12 0 13 1;
#X connect 12 0 18 1;
#X connect 12 0 16 1;
#X connect 13 0 8 0;
#X connect 14 0 15 0;
#X connect 16 0 8 0;
#X connect 17 0 18 0;
#X connect 17 1 16 0;
#X connect 18 0 14 0;
#X connect 23 0 13 0;
#X connect 23 1 5 0;
#X connect 23 2 24 0;
#X connect 24 0 26 0;
#X connect 25 0 26 0;
#X restore 27 89 pd partconv-A;
#X obj 26 156 outlet~;
#X obj 102 45 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 475 229 490 495 partconv-B 0;
#X obj 278 325 hsl 195 140 0 127 0 0 empty empty empty -2 -8 0 10 -204786
-204786 -1 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-minphase-B 2048 float 0;
#X coords 0 0.5 2047 -0.5 200 140 1 0 0;
#X restore 275 325 graph;
#X obj 28 24 inlet~;
#X obj 79 24 inlet;
#X obj 98 285 f \$0;
#X obj 44 394 line~;
#X obj 29 420 *~;
#X obj 28 448 outlet~;
#N canvas 237 468 311 250 arraycopy 0;
#X obj 35 34 inlet;
#X obj 35 79 for++ 0 2047;
#X obj 35 138 tabread \$0-IR-minphase;
#X obj 35 110 t f f;
#X obj 35 173 tabwrite \$0-IR-minphase-B;
#X obj 203 173 outlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 1 5 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 3 1 4 1;
#X restore 79 228 pd arraycopy;
#N canvas 542 313 296 243 crossovertime 0;
#X obj 24 189 outlet;
#X obj 24 81 samplerate~;
#X obj 24 54 loadbang;
#X obj 24 28 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 74 175 5 0 0 0 - - -;
#X obj 24 108 t b f;
#X obj 24 158 /;
#X msg 24 132 2.048e+06;
#X connect 1 0 5 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 5 0 7 0;
#X connect 5 1 6 1;
#X connect 6 0 4 0;
#X connect 6 0 0 0;
#X connect 7 0 6 0;
#X restore 270 95 pd crossovertime;
#X obj 79 338 pack 1 f;
#X msg 98 169 const 0;
#X obj 125 112 pack 0 f;
#X obj 98 84 t b b;
#X text 182 112 fade out;
#X text 134 338 fade in;
#X text 131 255 activate;
#X text 139 83 deactivate;
#X obj 98 195 s \$0-IR-minphase-B;
#X msg 98 310 set \$1-IR-minphase-B;
#X obj 29 363 bsaylor/partconv~ \$0-IR-minphase-B 64;
#X obj 79 54 sel 0 1;
#X obj 79 254 t b b b;
#X obj 98 139 delay;
#X msg 186 413 1;
#N canvas 494 473 344 211 powersave 0;
#X obj 20 21 inlet~;
#X obj 20 45 env~;
#X obj 20 68 != 0;
#X obj 20 93 change;
#X obj 20 119 sel 0;
#X obj 20 170 outlet;
#X msg 20 145 0;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 6 0 5 0;
#X restore 101 412 pd powersave;
#X obj 101 447 switch~;
#X connect 2 0 20 0;
#X connect 3 0 21 0;
#X connect 4 0 19 0;
#X connect 5 0 6 1;
#X connect 5 0 25 0;
#X connect 6 0 7 0;
#X connect 8 0 22 0;
#X connect 9 0 10 1;
#X connect 9 0 12 1;
#X connect 9 0 23 1;
#X connect 10 0 5 0;
#X connect 11 0 18 0;
#X connect 12 0 5 0;
#X connect 13 0 23 0;
#X connect 13 1 12 0;
#X connect 19 0 20 0;
#X connect 20 0 6 0;
#X connect 21 0 8 0;
#X connect 21 1 13 0;
#X connect 22 0 10 0;
#X connect 22 1 4 0;
#X connect 22 2 24 0;
#X connect 23 0 11 0;
#X connect 24 0 26 0;
#X connect 25 0 26 0;
#X restore 67 118 pd partconv-B;
#X text 23 186 Because partitioned convolution does not work with window
and overlap like regular fast convolution \, a switch from one filter
kernel to another causes discontinuity in the output signal. To alleviate
this effect \, two convolution instances are used to alternate \, with
a short crossover moment (2048 samples \, the filter kernel length).
;
#X connect 0 0 2 0;
#X connect 0 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 4 0 2 1;
#X connect 4 0 5 1;
#X connect 5 0 3 0;
#X restore 22 274 pd partconv;
#X text 141 134 spread the workload;
#X obj 85 137 delay 10;
#X obj 20 460 pddplink http://www.katjaas.nl/minimumphase/minimumphase.html
;
#X text 125 23 RMS value + EQ slider index (0-9);
#N canvas 261 183 417 313 speedlim 0;
#X obj -5 19 inlet;
#X obj -5 224 outlet;
#X obj -5 193 cyclone/speedlim;
#X obj 88 70 samplerate~;
#X obj 88 98 t b f;
#X obj 88 17 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 88 45 loadbang;
#X msg 88 129 3e+06;
#X obj 88 158 /;
#X floatatom 103 192 5 0 0 0 - - -;
#X text -6 249 The rate of change in filter kernel must not be faster
than the filter kernel length itself (2048 samples). [cyclone/speedlim]
is set at 3000 samples.;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 4 1 8 1;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 2 1;
#X connect 8 0 9 0;
#X restore 85 79 pd speedlim;
#X text 197 48 initialize / write settings;
#X text 19 441 [partconvEQ10~] Katja Vetter Aug 2013;
#X text 19 335 Low latency filter using minimum phase FIR and partitioned
convolution. Left inlet: audio signal. Right inlet: list with RMS value
and EQ slider index 0 - 9;
#X text 19 392 Pd-extended objects in the abstraction: [bsaylor/partconv~]
\, [cyclone/speedlim] \, [iemlib/for++].;
#X connect 0 0 10 0;
#X connect 2 0 15 0;
#X connect 3 0 12 0;
#X connect 4 0 9 0;
#X connect 5 0 6 0;
#X connect 6 0 10 1;
#X connect 7 0 2 0;
#X connect 9 0 5 0;
#X connect 10 0 1 0;
#X connect 12 0 4 0;
#X connect 15 0 3 0;
