#N canvas 84 22 1081 694 10;
#X declare -path ../;
#X declare -lib flatgui;
#X declare -lib cyclone;
#X declare -lib bsaylor;
#X declare -lib bsaylor;
#X declare -lib bsaylor;
#X obj 33 36 sp-title Steve Reich: Viola Phase;
#X obj 34 133 declare -path ../;
#X obj 149 475 sp-gpan4~;
#X obj 924 50 sp-gcpu;
#X obj 34 231 sp-gmix8~ mix8;
#X obj 631 281 f;
#X obj 664 281 + 1;
#X msg 646 251 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-loop-v1 198450 float 2;
#X coords 0 1 198450 -1 200 140 1 0 0;
#X restore 835 338 graph;
#X obj 626 440 tabwrite~ \$0-loop-v1;
#X msg 712 353 bang;
#X msg 704 397 stop;
#X obj 403 114 sp-metro 160;
#X obj 834 241 sp-gfoot-switch;
#X obj 631 314 sel 0 12;
#X obj 494 232 bng 32 250 50 0 empty empty PREPARE 35 16 0 16 -262144
-1 -1;
#N canvas 140 227 621 401 prepare 0;
#X obj 62 35 inlet bang;
#X obj 62 331 s \$0-clear-loop;
#X obj 62 79 t b b b;
#X obj 101 100 s \$0-init-array;
#X obj 263 35 r \$0-clear-loop;
#X obj 263 118 \$0;
#X msg 263 148 \; \$1-loop-v1 const 0;
#X obj 263 66 t b b;
#X msg 321 90 1;
#X msg 358 90 0;
#X text 374 63 Mute/unmute master while array cleanup;
#X obj 321 66 del 300;
#X obj 263 90 del 300;
#X msg 81 140 \; sp-v1 speed 1 \; sp-v2 speed 1 \; sp-v3 spped 1 \;
sp-v1 start 0 \; sp-v2 start 0 \; sp-v3 start 0 \; sp-v1 end 1 \; sp-v2
end 1 \; sp-v3 end 1 \;;
#X msg 404 122 \; sp-mix8 mute \$1 \; sp-mix8 3 mute 1 \;;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 13 0;
#X connect 2 2 3 0;
#X connect 4 0 7 0;
#X connect 5 0 6 0;
#X connect 7 0 12 0;
#X connect 7 1 8 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 11 0 9 0;
#X connect 12 0 5 0;
#X connect 12 0 11 0;
#X restore 494 274 pd prepare;
#N canvas 193 286 535 390 speed 0;
#X obj 69 44 r \$0-speed-up;
#X obj 229 44 r \$0-speed-freeze;
#X obj 69 82 f 1.005;
#X obj 219 202 r \$0-speed-up3;
#X obj 219 232 f 1.005;
#X msg 229 88 \; sp-v1 speed 1 \; sp-v2 speed 1 \; sp-v3 speed 1 \;
sp-c1 speed 1 \; sp-c2 speed 1 \; sp-c3 speed 1 \;;
#X msg 219 263 \; sp-v1 speed 1 \; sp-c1 speed 1 \; sp-v2 speed 1 \;
sp-c2 speed 1 \; sp-v3 speed \$1 \; sp-c3 speed \$1 \;;
#X msg 69 118 \; sp-v1 speed 1 \; sp-c1 speed 1 \; sp-v2 speed \$1
\; sp-c2 speed \$1 \; sp-v3 speed \$1 \; sp-c3 speed \$1 \;;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X restore 938 83 pd speed;
#X obj 637 91 bng 30 250 50 0 \$0-speed-up \$0-speed-up-r UP 6 -16
0 16 -260097 -1 -1;
#X obj 720 93 bng 30 250 50 0 \$0-speed-freeze \$0-speed-freeze-r FREEZE
-16 -16 0 16 -4032 -1 -1;
#N canvas 459 86 312 330 array 0;
#X msg 59 40 160;
#X floatatom 75 117 10 0 0 0 - - -;
#X obj 59 71 expr ((60 / $f1) * 44100) * 6;
#X text 124 89 looplength in samples;
#X obj 86 191 t b f;
#X obj 113 221 list prepend \$0;
#X obj 59 162 * 2;
#X obj 105 23 r \$0-init-array;
#X msg 113 249 \; \$1-loop-v1 resize \$2 \; sp-v1 setarray \$1-loop-v1
\; sp-v2 setarray \$1-loop-v1 \; sp-v3 setarray \$1-loop-v1 \;;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 0 6 0;
#X connect 4 1 5 0;
#X connect 5 0 8 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X restore 938 111 pd array;
#X msg 729 477 \; sp-v1 start \; sp-v2 start \; sp-v3 start \;;
#X obj 811 94 bng 30 250 50 0 \$0-speed-up3 \$0-speed-up3-r UP3 6 -16
0 16 -257985 -1 -1;
#N canvas 477 367 535 196 in~ 0;
#X obj 44 155 outlet~;
#X obj 94 155 outlet~;
#X obj 144 155 outlet~;
#X obj 194 155 outlet~;
#X obj 244 155 outlet~;
#X obj 294 155 outlet~;
#X obj 344 155 outlet~;
#X obj 394 155 outlet~;
#X obj 444 155 outlet;
#X obj 44 91 adc~ 1;
#X obj 94 127 r~ \$0-v1;
#X obj 144 97 r~ \$0-v2;
#X obj 194 117 r~ \$0-v3;
#X obj 244 90 r~ \$0-click;
#X obj 444 120 r \$0-bus;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 11 0 2 0;
#X connect 12 0 3 0;
#X connect 13 0 4 0;
#X connect 14 0 8 0;
#X coords 0 -1 1 1 272 20 1 100 100;
#X restore 34 202 pd in~;
#X obj 149 578 +dsp;
#X obj 305 538 dac~ 5 6;
#X obj 337 202 sp-gparam;
#N canvas 485 345 546 281 init 0;
#X obj 84 48 loadbang;
#X obj 84 239 s \$0-bus;
#X msg 84 137 mix8 0 label vla \, mix8 1 label lp1 \, mix8 2 label
lp2 \, mix8 3 label lp3 \, mix8 4 label clk \, mix8 5 label ... \,
mix8 6 label ... \, mix8 7 label ...;
#X msg 110 85 mix8 0 color 25 \, mix8 5 color 10 \, mix8 6 color 10
\, mix8 7 color 10;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X restore 938 139 pd init;
#N canvas 93 85 905 599 loops 1;
#X obj 57 37 loadbang;
#X obj 57 66 \$0;
#X msg 57 95 setarray \$1-loop-v1;
#X obj 73 133 r sp-v1;
#X obj 193 133 r sp-v2;
#X obj 349 133 r sp-v3;
#X obj 57 230 s~ \$0-v1;
#X obj 193 227 s~ \$0-v2;
#X obj 349 223 s~ \$0-v3;
#X obj 114 437 s \$0-diff12;
#X obj 563 33 import cyclone;
#X obj 114 264 snapshot~;
#X obj 250 264 snapshot~;
#X obj 406 264 snapshot~;
#X obj 473 193 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 473 158 loadbang;
#X text 360 309 24 - length of loop in 8ths;
#X obj 250 435 s \$0-diff23;
#X obj 57 166 sp-looper~;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-tdiff1 200 float 0;
#X coords 0 1 199 0 200 60 1 0 0;
#X restore 357 372 graph;
#X obj 44 392 tabwrite \$0-tdiff1;
#X obj 193 166 sp-looper~;
#X obj 349 167 sp-looper~;
#X obj 473 220 metro 20;
#X obj 546 255 f;
#X obj 583 254 + 1;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-tdiff2 200 float 0;
#X coords 0 1 199 0 200 60 1 0 0;
#X restore 600 373 graph;
#X obj 547 284 mod 200;
#X obj 214 395 tabwrite \$0-tdiff2;
#X obj 392 475 tabread \$0-tdiff1;
#X obj 149 367 * 200;
#X obj 44 366 / 200;
#X obj 214 368 / 200;
#X obj 301 368 * 200;
#X obj 520 474 tabread \$0-tdiff2;
#X obj 467 543 -;
#X obj 330 541 * 24;
#X obj 278 531 wrap 1;
#X obj 250 297 * 24;
#X obj 250 323 wrap 1;
#X obj 114 300 * 24;
#X obj 118 329 wrap 1;
#X obj 390 445 / 24;
#X obj 520 442 / 24;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 18 0;
#X connect 2 0 21 0;
#X connect 2 0 22 0;
#X connect 3 0 18 0;
#X connect 4 0 21 0;
#X connect 5 0 22 0;
#X connect 11 0 40 0;
#X connect 12 0 38 0;
#X connect 14 0 23 0;
#X connect 15 0 14 0;
#X connect 18 0 6 0;
#X connect 18 1 11 0;
#X connect 21 0 7 0;
#X connect 21 1 12 0;
#X connect 22 0 8 0;
#X connect 22 1 13 0;
#X connect 23 0 11 0;
#X connect 23 0 12 0;
#X connect 23 0 13 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 24 0 27 0;
#X connect 25 0 24 1;
#X connect 27 0 31 0;
#X connect 27 0 32 0;
#X connect 27 0 42 0;
#X connect 27 0 43 0;
#X connect 29 0 35 0;
#X connect 30 0 20 1;
#X connect 31 0 20 0;
#X connect 32 0 28 0;
#X connect 33 0 28 1;
#X connect 34 0 35 1;
#X connect 35 0 36 0;
#X connect 35 0 9 0;
#X connect 36 0 37 0;
#X connect 38 0 39 0;
#X connect 39 0 33 0;
#X connect 40 0 41 0;
#X connect 41 0 30 0;
#X connect 42 0 29 0;
#X connect 43 0 34 0;
#X restore 938 167 pd loops;
#X obj 403 169 s~ \$0-click;
#X obj 634 168 nbx 5 30 -1e+37 1e+37 0 0 \$0-diff12-s \$0-diff12 DIFF:1-2
0 -12 0 20 -262144 -1 -1 0.125 256;
#X obj 784 168 nbx 5 30 -1e+37 1e+37 0 0 \$0-diff23-s \$0-diff23 DIFF:2-3
0 -12 0 20 -262144 -1 -1 0 256;
#X msg 433 341 0.99;
#X msg 431 378 \; sp-v1 loopend \$1 \; sp-v2 loopend \$1 \; sp-v3 loopend
\$1;
#X msg 488 340 1;
#X connect 2 0 24 0;
#X connect 2 1 24 1;
#X connect 4 0 9 0;
#X connect 4 1 2 0;
#X connect 4 2 2 1;
#X connect 4 3 2 2;
#X connect 4 4 25 0;
#X connect 5 0 6 0;
#X connect 5 0 14 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 10 0 9 0;
#X connect 10 0 21 0;
#X connect 11 0 9 0;
#X connect 11 0 21 0;
#X connect 12 0 29 0;
#X connect 12 1 5 0;
#X connect 13 1 7 0;
#X connect 14 0 10 0;
#X connect 14 1 11 0;
#X connect 15 0 16 0;
#X connect 23 0 4 0;
#X connect 23 1 4 1;
#X connect 23 2 4 2;
#X connect 23 3 4 3;
#X connect 23 4 4 4;
#X connect 23 5 4 5;
#X connect 23 6 4 6;
#X connect 23 7 4 7;
#X connect 23 8 4 8;
#X connect 32 0 33 0;
#X connect 34 0 33 0;
